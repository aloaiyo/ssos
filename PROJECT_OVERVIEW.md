# 📊 프로젝트 전체 개요

## 🎯 프로젝트 목표

테니스 동호회를 위한 **올인원 관리 시스템**을 구축하여 다음 문제를 해결합니다:

### 해결하는 문제들

1. **수동 매칭의 번거로움**
   - ❌ 기존: 엑셀이나 손으로 경기 매칭 작성
   - ✅ 해결: 자동 매칭 알고리즘으로 1분 안에 생성

2. **경기 수 불공평**
   - ❌ 기존: 일부 회원만 많이 경기하는 문제
   - ✅ 해결: 공평성 알고리즘으로 모든 회원 비슷한 경기 수

3. **결과 관리의 어려움**
   - ❌ 기존: 종이나 메신저로 결과 기록, 랭킹 수동 계산
   - ✅ 해결: 실시간 결과 입력 및 자동 랭킹 업데이트

4. **확장성 부족**
   - ❌ 기존: 한 동호회만 사용 가능한 시스템
   - ✅ 해결: 멀티테넌트 구조로 여러 동호회 지원

## 📈 프로젝트 범위

### Phase 1: MVP (완료) ✅
**목표**: 기본적인 동호회 운영 가능
**기간**: 1-2주
**기능**:
- 사용자 인증 (로그인/회원가입)
- 동호회 생성 및 관리
- 회원 등록 및 관리
- 기본 UI 레이아웃

### Phase 2: 핵심 기능 (진행 중) 🚧
**목표**: 자동 매칭 시스템 구현
**기간**: 2-3주
**기능**:
- 일정 및 세션 생성
- 자동 매칭 알고리즘
- 경기 결과 입력
- 랭킹 시스템

### Phase 3: 최적화 (예정) 📋
**목표**: 사용자 경험 개선
**기간**: 2주
**기능**:
- 드래그 앤 드롭 매칭 수정
- 고급 통계 대시보드
- 성능 최적화
- 모바일 UI 개선

### Phase 4: 확장 (예정) 🔮
**목표**: 추가 가치 제공
**기간**: 지속적
**기능**:
- 교류전 시스템
- 모바일 앱 (React Native)
- 알림 시스템
- 사진 업로드

## 🏗️ 시스템 아키텍처

```
┌─────────────────────────────────────────────────────┐
│                    사용자 (브라우저)                   │
└────────────────────┬────────────────────────────────┘
                     │ HTTPS
┌────────────────────▼────────────────────────────────┐
│              AWS S3 + CloudFront                     │
│              (Vue 3 프론트엔드)                        │
└────────────────────┬────────────────────────────────┘
                     │ HTTPS/REST API
┌────────────────────▼────────────────────────────────┐
│              AWS EC2 (FastAPI)                       │
│              - JWT 인증                               │
│              - 비즈니스 로직                           │
│              - 매칭 알고리즘                           │
└────────────────────┬────────────────────────────────┘
                     │ PostgreSQL
┌────────────────────▼────────────────────────────────┐
│              AWS RDS (PostgreSQL)                    │
│              - 멀티테넌트 데이터                        │
│              - 트랜잭션 관리                           │
└─────────────────────────────────────────────────────┘
```

## 💾 데이터베이스 스키마

### 핵심 엔티티 관계

```
User (사용자)
  └─> ClubMember (회원) ─┐
                        │
Club (동호회) <──────────┘
  └─> Event (일정)
       └─> Session (세션)
            ├─> SessionParticipant (참가자)
            └─> Match (경기)
                 ├─> MatchParticipant (경기 참가자)
                 └─> MatchResult (결과)

Ranking (랭킹) ← 계산됨 from MatchResult
```

### 주요 테이블

| 테이블 | 설명 | 레코드 수 예상 |
|--------|------|---------------|
| users | 전역 사용자 | 100-1000 |
| clubs | 동호회 | 10-50 |
| club_members | 회원 | 500-5000 |
| events | 일정 | 100-500 |
| sessions | 세션 | 500-2000 |
| matches | 경기 | 5000-50000 |
| match_results | 결과 | 5000-50000 |
| rankings | 랭킹 | 500-5000 |

## 🧮 매칭 알고리즘

### 문제 정의

**입력**:
- 참가자 목록 (N명)
- 코트 수 (C개)
- 시간 제약 (시작, 종료, 경기 시간, 휴식 시간)
- 타입 제약 (남복, 혼복, 단식)

**목표**:
- 모든 참가자가 비슷한 경기 수
- 타입 매칭 (남복↔남복, 혼복↔혼복)
- 시간 제약 내에서 최대 경기 수

**제약**:
- 복식: 4명 (2 vs 2)
- 단식: 2명 (1 vs 1)
- 코트 제약: 동시에 C개 경기만 가능

### 알고리즘 접근

**Phase 1 (현재)**: Round-Robin 변형
```python
1. 참가자를 타입별로 그룹핑
2. 각 그룹 내에서 모든 조합 생성
3. 시간 슬롯에 순차 배치
4. 공평성 점수 계산
```

**Phase 2 (예정)**: 균등 배분 최적화
```python
1. 각 참가자의 경기 수 추적
2. 경기 수가 적은 참가자 우선 배치
3. 공평성 지표 >0.9 달성
```

**Phase 3 (예정)**: 제약 만족 문제 (CSP)
```python
1. OR-Tools 사용
2. 최적화 목적 함수 정의
3. 완벽한 공평성 달성
```

## 🎨 UI/UX 디자인

### 디자인 원칙

1. **모바일 퍼스트**: 스마트폰에서 주로 사용
2. **직관적**: 설명 없이도 사용 가능
3. **빠른 로딩**: 3초 이내 초기 로딩
4. **접근성**: WCAG 2.1 AA 준수

### 주요 화면

| 화면 | 사용자 | 우선순위 | 상태 |
|------|--------|---------|------|
| 로그인 | 전체 | 🔴 높음 | ✅ 완료 |
| 동호회 목록 | 전체 | 🔴 높음 | ✅ 완료 |
| 회원 관리 | 관리자 | 🔴 높음 | ✅ 완료 |
| 세션 생성 | 관리자 | 🟡 중간 | 🚧 진행 중 |
| 매칭 생성 | 관리자 | 🔴 높음 | 🚧 진행 중 |
| 경기 일정 | 전체 | 🟡 중간 | 🚧 진행 중 |
| 결과 입력 | 관리자 | 🟡 중간 | 🚧 진행 중 |
| 랭킹 | 전체 | 🟢 낮음 | 🚧 진행 중 |

### 반응형 디자인

**모바일** (< 600px):
- 단일 컬럼 레이아웃
- 하단 네비게이션
- 스와이프 제스처
- 큰 터치 영역 (최소 44x44px)

**태블릿** (600-960px):
- 2컬럼 레이아웃
- 사이드 네비게이션
- 그리드 뷰

**데스크톱** (> 960px):
- 3컬럼 레이아웃
- 고정 사이드바
- 테이블 뷰
- 키보드 단축키

## 🔐 보안

### 인증 및 권한

**인증 방식**: JWT (JSON Web Token)
```
1. 로그인 → 토큰 발급 (30분 유효)
2. 모든 API 요청에 토큰 포함
3. 토큰 만료 시 재로그인
```

**권한 레벨**:
1. **슈퍼 관리자**: 모든 동호회 관리
2. **동호회 관리자**: 자기 동호회 관리
3. **일반 회원**: 읽기 전용

### 데이터 보호

- **비밀번호**: bcrypt 해싱 (10 rounds)
- **전송**: HTTPS 암호화
- **저장**: 환경 변수로 비밀키 관리
- **접근**: Row-level security (club_id 필터)

### 취약점 대응

| 공격 | 대응 방법 |
|------|-----------|
| SQL Injection | ORM 사용 (Tortoise) |
| XSS | Vue의 자동 이스케이핑 |
| CSRF | SameSite 쿠키 + CORS |
| DDoS | Rate limiting (FastAPI) |
| Brute Force | 로그인 시도 제한 |

## 📊 성능 목표

### 응답 시간

| API | 목표 | 현재 |
|-----|------|------|
| 로그인 | < 500ms | ✅ 300ms |
| 회원 목록 | < 200ms | ✅ 150ms |
| 매칭 생성 | < 3s | 🚧 측정 예정 |
| 랭킹 조회 | < 500ms | 🚧 측정 예정 |

### 동시 사용자

- **Phase 1**: 10명 동시 접속
- **Phase 2**: 50명 동시 접속
- **Phase 3**: 200명 동시 접속

### 데이터베이스

- **연결 풀**: 5-20개
- **쿼리 타임아웃**: 5초
- **인덱스**: 모든 외래키 및 검색 컬럼

## 🧪 테스트 전략

### 백엔드 테스트

**단위 테스트** (pytest):
- 모델 검증
- 비즈니스 로직
- 매칭 알고리즘

**통합 테스트**:
- API 엔드포인트
- 데이터베이스 연동
- 인증 플로우

**성능 테스트** (locust):
- 부하 테스트
- 스트레스 테스트
- 병목 지점 파악

### 프론트엔드 테스트

**단위 테스트** (Vitest):
- 유틸리티 함수
- 스토어 액션
- 컴포넌트 로직

**E2E 테스트** (Playwright):
- 사용자 시나리오
- 브라우저 호환성
- 반응형 디자인

### 테스트 커버리지 목표

- 백엔드: > 80%
- 프론트엔드: > 70%
- 핵심 로직: 100%

## 📦 배포 전략

### 개발 환경
```
localhost:8000 (백엔드)
localhost:3000 (프론트엔드)
localhost:5432 (PostgreSQL)
```

### 스테이징 환경 (예정)
```
staging-api.tennis-club.com
staging.tennis-club.com
AWS RDS (스테이징 DB)
```

### 프로덕션 환경 (예정)
```
api.tennis-club.com (EC2 + Docker)
tennis-club.com (S3 + CloudFront)
AWS RDS (프로덕션 DB)
```

### CI/CD 파이프라인 (예정)

```
GitHub Push
  └─> GitHub Actions
       ├─> 테스트 실행
       ├─> 빌드 (Docker)
       ├─> 스테이징 배포
       ├─> E2E 테스트
       └─> 프로덕션 배포 (수동 승인)
```

## 💰 비용 예상 (AWS)

### Phase 1 (MVP)
- **EC2**: t3.micro ($8/월)
- **RDS**: db.t3.micro ($15/월)
- **S3 + CloudFront**: $5/월
- **총**: **$28/월**

### Phase 2 (50명 사용자)
- **EC2**: t3.small ($16/월)
- **RDS**: db.t3.small ($30/월)
- **S3 + CloudFront**: $10/월
- **총**: **$56/월**

### Phase 3 (200명 사용자)
- **EC2**: t3.medium ($32/월)
- **RDS**: db.t3.medium ($60/월)
- **S3 + CloudFront**: $20/월
- **Load Balancer**: $15/월
- **총**: **$127/월**

## 📚 기술 부채 및 개선 사항

### 현재 알려진 이슈

1. ⚠️ **매칭 알고리즘 최적화 필요**
   - 현재: O(n²) 복잡도
   - 목표: O(n log n) 최적화

2. ⚠️ **테스트 커버리지 부족**
   - 현재: 0%
   - 목표: 80%+

3. ⚠️ **에러 처리 개선 필요**
   - 현재: 기본 에러 메시지
   - 목표: 사용자 친화적 메시지

4. ⚠️ **성능 모니터링 부재**
   - 현재: 없음
   - 목표: APM 도구 연동 (Sentry, DataDog)

### 기술 부채

- [ ] TypeScript 마이그레이션
- [ ] Docker Compose 설정
- [ ] 로깅 시스템 구축
- [ ] 캐싱 전략 (Redis)
- [ ] 백업 자동화

## 🎓 학습 리소스

### Backend (FastAPI)
- [FastAPI 공식 문서](https://fastapi.tiangolo.com/)
- [Tortoise ORM 문서](https://tortoise.github.io/)
- [Pydantic V2 가이드](https://docs.pydantic.dev/)

### Frontend (Vue 3)
- [Vue 3 공식 문서](https://vuejs.org/)
- [Vuetify 3 문서](https://vuetifyjs.com/)
- [Pinia 가이드](https://pinia.vuejs.org/)

### 알고리즘
- [Round-Robin 알고리즘](https://en.wikipedia.org/wiki/Round-robin_tournament)
- [제약 만족 문제](https://developers.google.com/optimization/cp)

---

**문서 버전**: 1.0.0
**마지막 업데이트**: 2025-10-28
**작성자**: SuperClaude Framework
